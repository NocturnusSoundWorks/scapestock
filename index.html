<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ScapeStock</title>
  <style>
     body {
    font-family: sans-serif;
    margin: 0;
    background: #f7f7f7;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
    h1 {
      text-align: center;
    }
    
    .gallery {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4枚並び */
    gap: 16px;
    max-width: 1000px;
    margin-top: 30px;
    justify-items: center;
  }

  .gallery img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
    max-width: 220px; /* 正方形を維持しつつ幅制限 */
  }

  @media screen and (max-width: 960px) {
    .gallery {
      grid-template-columns: repeat(2, 1fr); /* 小さい画面では2列 */
    }
  }

    /* モーダル全体の背景 */
.modal {
  display: none;
  position: fixed;
  z-index: 10;
  padding-top: 60px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
}

/* 拡大画像 */
.modal-content {
  margin: auto;
  display: block;
  max-width: 70%;
  max-height: 70%;
  box-shadow: 0 0 20px #000;
  border-radius: 8px;
  transition: 0.3s;
  background: #fff;
}
  </style>
</head>
<body>
  <h1>ScapeStock</h1>
  <p style="text-align:center;">風景と都市スナップのフリー写真素材</p><br>
  
  <div style="margin: 20px 0; text-align: center;">
  <form onsubmit="filterImages(); return false;">
    <input
      type="text"
      id="searchInput"
      placeholder="画像を検索..."
      style="padding: 8px; width: 60%; max-width: 300px; font-size: 16px;"
    />
    <button
      type="submit"
      style="padding: 8px 16px; font-size: 16px; margin-left: 8px; background: #333; color: white; border: none; border-radius: 4px; cursor: pointer;"
    >
      検索
    </button>
  </form>
</div>


  
 <div class="gallery">
  <img src="images/thu/25K062101_thu.jpg" alt="空　雲　太陽　青　白　景色　夏　昼　晴">
  <img src="images/thu/25K062102_thu.jpg" alt="空　雲　青　白　景色　夏　昼 晴">
  <img src="images/thu/25K062103_thu.jpg" alt="空　雲　青　葉　緑　景色　夏　昼">
  <img src="images/thu/25K062104_thu.jpg" alt="空　雲　青　白　景色　夏　昼　晴">
  <img src="images/thu/25K062105_thu.jpg" alt="空　夕日　夜　景色　オレンジ">
  <img src="images/thu/25K062106_thu.jpg" alt="川　景色　東京 街　都会　昼　ビル">
  <img src="images/thu/25K062107_thu.jpg" alt="花　桜　葉　景色　白　春">
  <img src="images/thu/25K062108_thu.jpg" alt="花　紫陽花　あじさい　葉　景色　紫　青">
  <img src="images/thu/25K062109_thu.jpg" alt=""花　葉　草　景色　緑">
  <img src="images/thu/25K062110_thu.jpg" alt="花　葉　景色　赤">
  <img src="images/thu/25K062111_thu.jpg" alt="空　雲　青　白　景色　夏　昼　晴">
  <img src="images/thu/25K062112_thu.jpg" alt="花　紫陽花　あじさい　葉　景色　紫　青">
  <img src="images/thu/25K062113_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄">
  <img src="images/thu/25K062114_thu.jpg" alt="花　紫陽花　あじさい　葉　景色　紫　青">
  <img src="images/thu/25K062115_thu.jpg" alt="花　紫陽花　あじさい　葉　景色　紫　青">
  <img src="images/thu/25K062116_thu.jpg" alt="花　葉　景色　紫　白　青">
  <img src="images/thu/25K062117_thu.jpg" alt="森　草　葉　景色　緑　木漏れ日　太陽　光">
  <img src="images/thu/25K062118_thu.jpg" alt="空　雲　青　白　景色　夏　昼 晴">
  <img src="images/thu/25K062119_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄">
  <img src="images/thu/25K062120_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄 ピンク">
  <img src="images/thu/25K062121_thu.jpg" alt="田舎　田んぼ　草　景色　傘　雨　雨上がり　女性　後ろ姿">
  <img src="images/thu/25K062122_thu.jpg" alt="空　雲　青　白　景色　夏　昼 晴">
  <img src="images/thu/25K062123_thu.jpg" alt="空　緑　青　景色　夏　草　紅葉">   
  <img src="images/thu/25K062124_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄 ピンク">
  <img src="images/thu/25K062125_thu.jpg" alt="空　雲　青　白　景色　田舎　夏　昼 晴　田んぼ　緑">
  <img src="images/thu/25K062126_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄 ピンク">
  <img src="images/thu/25K062127_thu.jpg" alt="花　葉　景色　黄 ひまわり　向日葵　夏">
  <img src="images/thu/25K062128_thu.jpg" alt="花　桜　葉　景色　白 ピンク　春">
  <img src="images/thu/25K062129_thu.jpg" alt="空　雲　青　景色　田舎　夏　昼 晴　緑　山">
  <img src="images/thu/25K062130_thu.jpg" alt="花　紫陽花　あじさい　葉　景色　紫　青">
  <img src="images/thu/25K062131_thu.jpg" alt="公園　滑り台　昼　景色">
  <img src="images/thu/25K062132_thu.jpg" alt="森　草　葉　景色　緑　木漏れ日　太陽　光">
  <img src="images/thu/25K062133_thu.jpg" alt="空　雲　青　白　景色　夏　昼　晴">
  <img src="images/thu/25K062134_thu.jpg" alt="花　葉　草　種　景色　たんぽぽ　綿毛">
  <img src="images/thu/25K062135_thu.jpg" alt="空　雲　青　白　景色　田舎　夏　昼 晴　田んぼ　緑">
  <img src="images/thu/25K062136_thu.jpg" alt="花　草　葉　景色　紫　青　蜂　虫">
  <img src="images/thu/25K062137_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄">
  <img src="images/thu/25K062138_thu.jpg" alt="田舎　夏　昼 晴　後ろ姿　子供　公園">
  <img src="images/thu/25K062139_thu.jpg" alt="景色　田舎　夏　昼 晴　緑 道　あぜ道　山">
  <img src="images/thu/25K062140_thu.jpg" alt="空　雲　青　白　景色　夏　昼 晴　緑">
  <img src="images/thu/25K062141_thu.jpg" alt="花　葉　景色　赤 オレンジ　黄 ピンク">
  <img src="images/thu/25K062142_thu.jpg" alt="花　草　葉　景色　紫　青　蜂　虫">
  <img src="images/thu/25K062143_thu.jpg" alt="花　葉　景色　紫　青 雨　雨上がり　軒下">
  <img src="images/thu/25K062143_thu.jpg" alt="葉　景色　黒　白　雨　雨上がり　軒下">
</div>
  <!-- ページボタン表示エリア -->
<div id="pagination" style="text-align: center; margin-top: 20px;"></div>
  
  <p style="text-align: center; margin-top: 40px;">
  <a href="terms.html" style="color: #333; text-decoration: underline;">利用規約はこちら</a>
</p>
  
<div id="modal" class="modal" onclick="closeModal(event)">
  <div style="text-align: center;">
    <img id="modalImg" class="modal-content" src="" alt="拡大画像">
    <p style="color: white; margin-top: 1em;">この画像をダウンロードしますか？</p>
    <a id="downloadBtn" href="#" download style="
      display: inline-block;
      padding: 10px 20px;
      background: #ffffff;
      color: #333;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
    ">
      ダウンロード
    </a>
  </div>
</div>

<script>
  const IMAGES_PER_PAGE = 20;
  let currentPage = 1;

  document.addEventListener("DOMContentLoaded", () => {
    showPage(1);
    setModalEvents();
  });

  function showPage(page) {
    const images = document.querySelectorAll('.gallery img');
    const totalImages = images.length;
    const totalPages = Math.ceil(totalImages / IMAGES_PER_PAGE);
    currentPage = page;

    images.forEach((img, index) => {
      const start = (page - 1) * IMAGES_PER_PAGE;
      const end = start + IMAGES_PER_PAGE;
      img.style.display = (index >= start && index < end) ? '' : 'none';
    });

    renderPagination(totalPages);
  }

  function renderPagination(totalPages) {
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = '';

    for (let i = 1; i <= totalPages; i++) {
      const btn = document.createElement('button');
      btn.textContent = i;
      btn.style.margin = '4px';
      btn.style.padding = '8px 12px';
      btn.style.background = i === currentPage ? '#333' : '#ccc';
      btn.style.color = i === currentPage ? '#fff' : '#000';
      btn.style.border = 'none';
      btn.style.borderRadius = '4px';
      btn.style.cursor = 'pointer';
      btn.onclick = () => {
        showPage(i);
        setModalEvents(); // 再設定
      };
      pagination.appendChild(btn);
    }
  }

  function setModalEvents() {
    document.querySelectorAll('.gallery img').forEach(img => {
      img.onclick = function () {
        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('modalImg');
        const downloadBtn = document.getElementById('downloadBtn');

        modal.style.display = "flex";
        modalImg.src = this.src;
        modalImg.alt = this.alt;

        const thumbSrc = this.src;
        const fullSrc = thumbSrc.replace("thu/", "full/").replace("_thu", "");
        downloadBtn.href = fullSrc;
        downloadBtn.download = fullSrc.split('/').pop();
      };
    });
  }

  function closeModal(e) {
    if (e.target.id === 'modalImg' || e.target.id === 'downloadBtn') return;
    document.getElementById('modal').style.display = "none";
  }

  function filterImages() {
  const input = document.getElementById('searchInput').value.toLowerCase();
  const images = document.querySelectorAll('.gallery img');
  let results = [];

  images.forEach(img => {
    const alt = img.alt.toLowerCase();
    if (alt.includes(input)) {
      results.push(img);
    }
  });

  const pagination = document.getElementById('pagination');
  pagination.innerHTML = '';

  images.forEach(img => {
    img.style.display = 'none';
  });

  results.forEach(img => {
    img.style.display = '';
  });

  setModalEvents();

  // 入力が空ならページ1に戻す
  if (input.trim() === '') {
    showPage(1);
  }
}
  
</script>
</body>
</html>
